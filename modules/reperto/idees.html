<style>
    .ellipsis {
        overflow: hidden;
        -ms-text-overflow: ellipsis;
        -o-text-overflow: ellipsis;
        text-overflow: ellipsis;
        display: block;
        white-space: nowrap;
    }
</style>

<section ng-repeat="idee in reperto.display.idees" class="idee-item item col-lg-6" id="initiative-{{idee.id}}" 
			ng-click="reperto.toggleDisplayInitiative(idee)"
			ng-show="reperto.isPaginationVisible($index)"
>
	 	
	 	
	<div class="panel panel-success {{reperto.cssClasses[reperto.sectionByChapterId[idee.parent].id]}}">
		<div class="panel-heading" style="min-height:52px !important; height: 52px !important;">
			<h4 class="panel-title initiative-title" ng-mouseenter="idee.displaybody = true"> 
				<span class="{{idee.id}} ellipsis" data-toggle="tooltip" data-placement="top" title="{{idee.titre}}">{{idee.titre}}</span>
				<span class="pull-right" ng-hide="true">
					<span ng-hide="idee.favorite" class="cac-fav icon-action glyphicon glyphicon-star-empty" ng-click="reperto.saveInitiative(idee)">&nbsp;</span>	
					<span ng-show="idee.favorite" class="cac-fav icon-action glyphicon glyphicon-star" ng-click="reperto.removeSavedInitiative(idee)">&nbsp;</span>
				</span>
			</h4>
		</div>
		<div class="panel-body" style="padding-bottom: 20px;" ng-class="{'experiences-visibles': idee.display.experiences && idee.display.experiences.length > 0}">
			<p style="" ng-hide="idee.displayLong">
				<span ng-bind-html="idee.description"></span>
				<a href="" ng-click="reperto.switchDisplay(true, idee)">Voir plus</a>
			</p>
			
			<p style="" ng-show="idee.displayLong">
				<span ng-bind-html="idee.descriptionlongue"></span>
				<a href="" ng-click="reperto.switchDisplay(false, idee)">Voir moins</a>
			</p>
			
			<p ng-show="idee.references && idee.references.length > 0">
				<span class="glyphicon glyphicon-globe"></span>&nbsp; 
				<span ng-repeat="lien in idee.references">
					<a href="{{lien.href}}">{{lien.label}}</a><br />
				</span>
			</p>
			<p ng-show="idee.keywords.length > 0">
				<span class="glyphicon glyphicon-tag">&nbsp;</span> 
				<span class="tag" ng-repeat="keyword in idee.keywords"> 
					<span class="label label-info">{{keyword}}</span>&nbsp;
				</span>
				<span class="tag"> 
					<span class="label label-default">{{idee.geoloc}}</span>&nbsp;
				</span>
			</p>
			
			<div ng-show="idee.experiences == 'loading'" style="color: rgba(0,0,0,0.6)" class="text-center">
				<img src="images/chargement.gif" width="18" height="18"/>&nbsp;Chargement des exp√©riences en cours.
			</div>
			
			<div ng-show="idee.experiences != 'loading' && idee.experiences.length == 0" style="position:absolute; bottom: 15px; left: 15px; right:15px; height: 150px; background-image: url('images/placeholder.png')">

			</div>
			<slick id="slick-{{idee.id}}" class="slixperiences" style="position: relative; bottom: -20px;" ng-hide="idee.experiences == 'loading' || idee.experiences.length == 0" dots="true" autoplay="false" infinite="false" slides-to-show="1" slides-to-scroll="1" init-onload=true data="idee.experiences">
					
					<div ng-repeat="experience in idee.experiences track by $index" class="row">
						<div class="panel panel-default col-lg-12" style="border: none;">
					
							<div class="panel-heading">
								<h4 class="panel-title initiative-title">
									<span class="" ng-bind-html="experience.label"></span>
								</h4>
							</div>
							
							<div class="panel-body" style="height: 120px; max-height: 120px; overflow:auto; font-size: 0.9em; padding: 5px;">
								
								<p style="" ng-hide="experience.displayLong">
									<span ng-bind-html="experience.description"></span>
									<a href="" ng-click="experience.displayLong=true">Voir plus</a>
								</p>
								
								<p style="" ng-show="experience.displayLong">
									<span ng-bind-html="experience.descriptionlongue"></span>
									
									<p ng-show="experience.displayLong && experience.references && experience.references.length > 0">
										<span class="glyphicon glyphicon-globe"></span>&nbsp; 
										<span ng-repeat="lien in experience.references">
											<a target="_" href="{{lien.lien}}">{{lien.nom}}</a><br />
										</span>
									</p>
									
									<p ng-show="experience.displayLong && experience.contacts && experience.contacts.length > 0">
										<span class="glyphicon glyphicon-user"></span>&nbsp; 
										<span ng-repeat="contact in experience.contacts">
											<a href="{{contact.href}}">{{contact}}</a><br />
										</span>
									</p>
									
									<a ng-show="experience.displayLong" href="" ng-click="experience.displayLong=false">Voir moins</a>
								</p>
					
								<p ng-show="experience.keywords.length > 0">
									<span class="glyphicon glyphicon-tag">&nbsp;</span> 
									<span class="tag" ng-repeat="keyword in experience.keywords"> 
										<span class="label label-info">{{keyword}}</span>&nbsp;
									</span>
									<span class="tag"> 
										<span class="label label-default">{{experience.geoloc}}</span>&nbsp;
									</span>
								</p>
							</div>
						</div>
					
					</div>
				
			</slick>
		</div>
	</div>
</section>
